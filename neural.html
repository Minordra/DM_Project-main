<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ЁЯТЦ р╕Юр╕вр╕▓р╕Бр╕гр╕Ур╣Мр╕Др╕зр╕▓р╕бр╣Ар╕Вр╣Йр╕▓р╕Бр╕▒р╕Щр╣Др╕Фр╣Йр╕Вр╕нр╕Зр╕Др╕╣р╣Ир╕гр╕▒р╕Б ЁЯТЦ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/brain.js"></script>
  <link rel="stylesheet" href="nrstyle.css">
  <script src="script.js" type="module"></script>
  <style>

  </style>

  <!-- р╕кр╣Ир╕зр╕Щ Header -->
  <!-- р╕кр╣Ир╕зр╕Щ Header -->
  <header class="bg-danger text-white text-center py-4 shadow custom-header">
    <h1>ЁЯТЦ р╕гр╕░р╕Ър╕Ър╕Юр╕вр╕▓р╕Бр╕гр╕Ур╣Мр╕Др╕зр╕▓р╕бр╣Ар╕Вр╣Йр╕▓р╕Бр╕▒р╕Щр╣Др╕Фр╣Йр╕Вр╕нр╕Зр╕Др╕╣р╣Ир╕гр╕▒р╕Б ЁЯТЦ</h1>
    <p>р╕Фр╕╣р╣Вр╕нр╕Бр╕▓р╕кр╕Др╕зр╕▓р╕бр╕гр╕▒р╕Бр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╕Бр╕▒р╕Ър╕Др╕╣р╣Ир╣Ар╕Фр╕Х! ЁЯМ╣</p>
    <ul class="nav justify-content-end">
      <li><a href="homepage.html" class="nav-link px-2 link-body-emphasis">Homepage</a></li>
      <li><a href="index.html" class="nav-link px-2 link-body-emphasis">GeneticAlgorithm</a></li>
    </ul>
  </header>

  <!-- р╕кр╣Ир╕зр╕Щр╕Яр╕нр╕гр╣Мр╕б -->
  <section class="container mt-4">
    <div class="row justify-content-center mt-5 mb-5">
      <div class="col-md-6">
        <div class="card shadow-lg p-4 card-form-container">
          <h2 class="text-center text-danger">ЁЯТЮ р╕Юр╕вр╕▓р╕Бр╕гр╕Ур╣Мр╕Др╕зр╕▓р╕бр╣Ар╕Вр╣Йр╕▓р╕Бр╕▒р╕Щр╣Др╕Фр╣Й</h2>
          <form id="uploadForm">
            <div class="mb-3">
              <label for="csvFile" class="form-label">ЁЯУВ р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣М CSV р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Ар╕Чр╕гр╕Щр╣Вр╕бр╣Ар╕Фр╕е</label>
              <input type="file" class="form-control" id="csvFile" accept=".csv" onchange="handleFileUpload(event)">
            </div>
            <div class="text-center">
              <button type="button" class="btn btn-danger" onclick="trainModel()">ЁЯЪА р╕Эр╕╢р╕Бр╣Вр╕бр╣Ар╕Фр╕е</button>
            </div>
          </form>
          <hr>
          <form id="predictionForm">
            <div class="mb-3">
              <label for="dec" class="form-label">ЁЯТС р╕Др╕╕р╕Ур╣Ар╕ер╕╖р╕нр╕Бр╕Др╕╣р╣Ир╣Ар╕Фр╕Хр╕лр╕гр╕╖р╕нр╣Др╕бр╣И (0 р╕лр╕гр╕╖р╕н 1)</label>
              <input type="number" class="form-control" id="dec" min="0" max="1" required>
            </div>
            <div class="mb-3">
              <label for="like_o" class="form-label">тЭдя╕П р╕Др╕╣р╣Ир╣Ар╕Фр╕Хр╕гр╕╣р╣Йр╕кр╕╢р╕Бр╕Кр╕нр╕Ър╕Др╕╕р╕Ур╣Бр╕Др╣Ир╣Др╕лр╕Щ (0-10)</label>
              <input type="number" class="form-control" id="like_o" min="0" max="10" required>
            </div>
            <div class="mb-3">
              <label for="like" class="form-label">ЁЯТЦ р╕Др╕╕р╕Ур╕гр╕╣р╣Йр╕кр╕╢р╕Бр╕Кр╕нр╕Ър╕Др╕╣р╣Ир╣Ар╕Фр╕Хр╣Бр╕Др╣Ир╣Др╕лр╕Щ (0-10)</label>
              <input type="number" class="form-control" id="like" min="0" max="10" required>
            </div>
            <div class="mb-3">
              <label for="fun_o" class="form-label">ЁЯОЙ р╕Др╕╣р╣Ир╣Ар╕Фр╕Хр╕гр╕╣р╣Йр╕кр╕╢р╕Бр╕зр╣Ир╕▓р╕Др╕╕р╕Ур╕кр╕Щр╕╕р╕Бр╣Бр╕Др╣Ир╣Др╕лр╕Щ (0-10)</label>
              <input type="number" class="form-control" id="fun_o" min="0" max="10" required>
            </div>
            <div class="mb-3">
              <label for="fun" class="form-label">ЁЯдг р╕Др╕╕р╕Ур╕гр╕╣р╣Йр╕кр╕╢р╕Бр╕зр╣Ир╕▓р╕кр╕Щр╕╕р╕Бр╕Бр╕▒р╕Ър╕Др╕╣р╣Ир╣Ар╕Фр╕Хр╣Бр╕Др╣Ир╣Др╕лр╕Щ (0-10)</label>
              <input type="number" class="form-control" id="fun" min="0" max="10" required>
            </div>
            <div class="mb-3">
              <label for="shar_o" class="form-label">ЁЯО╢ р╕Др╕╣р╣Ир╣Ар╕Фр╕Хр╕гр╕╣р╣Йр╕кр╕╢р╕Бр╕зр╣Ир╕▓р╕бр╕╡р╕Др╕зр╕▓р╕бр╕кр╕Щр╣Гр╕Ир╕гр╣Ир╕зр╕бр╕Бр╕▒р╕Щр╣Бр╕Др╣Ир╣Др╕лр╕Щ (0-10)</label>
              <input type="number" class="form-control" id="shar_o" min="0" max="10" required>
            </div>
            <div class="text-center">
              <button type="button" class="btn btn-danger" onclick="predictMatch()">ЁЯФН р╕Др╕│р╕Щр╕зр╕У</button>
            </div>
          </form>
          <div class="mt-4" id="result"></div>
        </div>
      </div>
    </div>
  </section>

  <div class="heart-container"></div>


  <script>
    const net = new brain.NeuralNetwork({ hiddenLayers: [6, 4], activation: 'sigmoid' });
    let trainingData = [];

    function handleFileUpload(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (e) {
        processCSV(e.target.result);
      };
      reader.readAsText(file);
    }

    function processCSV(csv) {
      const lines = csv.split("\n");
      trainingData = [];
      for (let i = 1; i < lines.length; i++) {
        const cols = lines[i].split(",");
        if (cols.length < 7) continue;
        trainingData.push({ input: { dec: parseFloat(cols[0]), like_o: parseFloat(cols[1]), like: parseFloat(cols[2]), fun_o: parseFloat(cols[3]), fun: parseFloat(cols[4]), shar_o: parseFloat(cols[5]) }, output: { match: parseFloat(cols[6]) } });
      }
      alert("тЬЕ р╣Др╕Яр╕ер╣М CSV р╣Вр╕лр╕ер╕Фр╕кр╕│р╣Ар╕гр╣Зр╕И! р╕Юр╕гр╣Йр╕нр╕бр╕Эр╕╢р╕Бр╣Вр╕бр╣Ар╕Фр╕е");
    }

    function trainModel() {
      if (trainingData.length === 0) return alert("тЪая╕П р╕Бр╕гр╕╕р╕Ур╕▓р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣М CSV р╕Бр╣Ир╕нр╕Щ");
      net.train(trainingData, { iterations: 100, learningRate: 0.05 });
      alert("ЁЯОЙ р╣Вр╕бр╣Ар╕Фр╕ер╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Эр╕╢р╕Бр╕кр╕│р╣Ар╕гр╣Зр╕И!");
    }

    function predictMatch() {
      const inputData = {
        dec: parseFloat(document.getElementById("dec").value),
        like_o: parseFloat(document.getElementById("like_o").value),
        like: parseFloat(document.getElementById("like").value),
        fun_o: parseFloat(document.getElementById("fun_o").value),
        fun: parseFloat(document.getElementById("fun").value),
        shar_o: parseFloat(document.getElementById("shar_o").value)
      };

      const output = net.run(inputData);
      let percent = (output.match * 100).toFixed(2);
      let message = "";
      let alertClass = "";

      if (percent > 50) {
        message = `тЭдя╕П р╣Вр╕нр╕Бр╕▓р╕кр╕Др╕зр╕▓р╕бр╣Ар╕Вр╣Йр╕▓р╕Бр╕▒р╕Щр╣Др╕Фр╣Йр╕кр╕╣р╕З (${percent}%)`;
        alertClass = "alert-success";
      } else if (percent >= 20) {
        message = `ЁЯШК р╣Вр╕нр╕Бр╕▓р╕кр╕Др╕зр╕▓р╕бр╣Ар╕Вр╣Йр╕▓р╕Бр╕▒р╕Щр╣Др╕Фр╣Йр╕Ыр╕▓р╕Щр╕Бр╕ер╕▓р╕З (${percent}%)`;
        alertClass = "alert-warning";
      } else {
        message = `ЁЯТФ р╣Вр╕нр╕Бр╕▓р╕кр╕Др╕зр╕▓р╕бр╣Ар╕Вр╣Йр╕▓р╕Бр╕▒р╕Щр╣Др╕Фр╣Йр╕Хр╣Ир╕│ (${percent}%)`;
        alertClass = "alert-danger";
      }

      document.getElementById("result").innerHTML = `<div class='alert ${alertClass} text-center'>${message}</div>`;
    }

  </script>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</html>